<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø³Ø§Ù…Ø§Ù†Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø±Ø§Ø¬Ø¹ÛŒÙ† | Ø¯Ú©ØªØ± Ù…Ù„ÛŒØ­Ù‡ ØºÙÙˆØ±ÛŒ Ù…Ù†Ø´</title>
<meta name="theme-color" content="#6f42c1" />
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Vazirmatn',sans-serif}
body{
  margin:0;
  min-height:100svh;
  background:linear-gradient(135deg,#6f42c1 0%,#9c6be8 25%,#f5f5fc 80%);
  display:flex;align-items:center;justify-content:center;
  color:#333;overflow-x:hidden
}
.card{
  width:100%;max-width:420px;
  background:#fff;border-radius:18px;padding:32px 28px;
  box-shadow:0 20px 45px rgba(111,66,193,.25);
  animation:fadeIn .7s ease both
}
@keyframes fadeIn{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
.fade-out{animation:fadeOut .5s ease forwards}
@keyframes fadeOut{to{opacity:0;transform:translateY(-20px)}}
h1,h2{margin:0 0 10px;text-align:center;color:#563d7c;font-weight:600}
.subtitle{text-align:center;font-size:14px;color:#555;margin-bottom:25px;line-height:1.6}
.field{margin-bottom:18px;text-align:right}
.field label{display:block;font-size:13px;margin-bottom:6px;color:#555}
.field input{
  width:100%;padding:12px 14px;font-size:15px;border-radius:12px;border:1px solid #ccc;
  transition:border .2s,box-shadow .2s
}
.field input:focus{
  outline:none;border-color:#6f42c1;
  box-shadow:0 0 0 3px rgba(111,66,193,.15)
}
.btn{
  width:100%;padding:13px 14px;margin-top:10px;font-size:15px;
  border:none;border-radius:12px;cursor:pointer;
  color:#fff;font-weight:500;transition:transform .1s,box-shadow .2s,background .2s
}
.btn:active{transform:scale(.97)}
.btn:hover{box-shadow:0 4px 12px rgba(0,0,0,.15)}
.menu-btn{margin:8px 0}
.error{color:#dc3545;font-size:14px;text-align:center;margin-top:12px}
.loader{text-align:center;font-size:14px;color:#777;margin-top:12px;display:none}

/* Ø±Ù†Ú¯ Ø¯Ú©Ù…Ù‡ Ù‡Ø§ Ù…ØªÙØ§ÙˆØª */
.primary{background:#6f42c1}.primary:hover{background:#5a34ad}
.green{background:#28a745}.green:hover{background:#23923d}
.yellow{background:#ffc107;color:#222}.yellow:hover{background:#e0ac07}
.blue{background:#007bff}.blue:hover{background:#0069d9}
.orange{background:#fd7e14}.orange:hover{background:#e36b0b}
.purple{background:#6610f2}.purple:hover{background:#520dcf}
.teal{background:#20c997}.teal:hover{background:#1aa179}
.danger{background:#dc3545}.danger:hover{background:#c82333}
.clinic-btn{background:#f8f0ff;color:#4b2c83}.clinic-btn:hover{background:#eaddff}

</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h2>ğŸ” ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡</h2>
  <p class="subtitle">Ø³Ø§Ù…Ø§Ù†Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø±Ø§Ø¬Ø¹ÛŒÙ†<br>Ø¯Ú©ØªØ± Ù…Ù„ÛŒØ­Ù‡ ØºÙÙˆØ±ÛŒ Ù…Ù†Ø´</p>

  <div class="field">
    <label>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
    <input id="username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
  </div>

  <div class="field">
    <label>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
    <input id="password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
  </div>

  <button class="btn primary" onclick="login()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡</button>
  <div id="loader" class="loader">Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...</div>
  <div id="error" class="error"></div>
</div>

<!-- MENU -->
<div id="menu" class="card" style="display:none;">
  <h1>ğŸ“‹ Ø³Ø§Ù…Ø§Ù†Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø±Ø§Ø¬Ø¹ÛŒÙ†</h1>
  <p class="subtitle">Ø¯Ú©ØªØ± Ù…Ù„ÛŒØ­Ù‡ ØºÙÙˆØ±ÛŒ Ù…Ù†Ø´</p>

  <button class="btn green menu-btn" onclick="go('','_blank')">â• Ø«Ø¨Øª Ù…Ø±Ø§Ø¬Ø¹ Ø¬Ø¯ÛŒØ¯</button>
  <button class="btn yellow menu-btn" onclick="go('?page=editReferral','_blank')">ğŸ“ ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ù…Ø±Ø§Ø¬Ø¹</button>
  <button class="btn blue menu-btn" onclick="go('?page=Appointments','_blank')">ğŸ“… Ù†ÙˆØ¨Øª Ø¯Ù‡ÛŒ</button>
  <button class="btn orange menu-btn" onclick="go('?page=report','_blank')">ğŸ“Š Ù…Ø¯ÛŒØ±ÛŒØª Ù†ÙˆØ¨Øª Ø¯Ù‡ÛŒ</button>
  <button class="btn purple menu-btn" onclick="go('?page=sessions','_blank')">ğŸ§© Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù„Ø³Ø§Øª Ø¯Ø±Ù…Ø§Ù†</button>
  <button class="btn teal menu-btn" onclick="go('?page=referralReport','_blank')">ğŸ“„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ Ú¯Ø²Ø§Ø±Ø´ Ù¾Ø±ÙˆÙ†Ø¯Ù‡</button>
  <button class="btn clinic-btn menu-btn" onclick="go('?page=clinicReport','_blank')">ğŸ¥ Ú¯Ø²Ø§Ø±Ø´ Ú©Ù„ÛŒÙ†ÛŒÚ©â€ŒÙ‡Ø§</button>
  <button class="btn clinic-btn menu-btn" onclick="go('?page=SessionReport','_blank')">ğŸ“ˆ Ú¯Ø²Ø§Ø±Ø´ ØªÚ©Ù…ÛŒÙ„ÛŒ</button>
  <button class="btn danger" style="margin-top:25px;" onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³Ø§Ù…Ø§Ù†Ù‡</button>
</div>

<script>
const USERS=[{user:"admin",pass:"1234"},{user:"staff",pass:"5678"}];
const BASE="https://script.google.com/macros/s/AKfycbwhZf8S7RNNLusYGhDaw8QfQ-dxiD04yqaQQd_M7SzT/exec";
const AUTO_LOGOUT_MINUTES=10;

function login(){
  const u=username.value.trim(),p=password.value.trim();
  const ok=USERS.find(x=>x.user===u&&x.pass===p);
  if(!ok){error.innerText="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª";return;}
  error.innerText="";loader.style.display="block";
  setTimeout(()=>{
    localStorage.setItem("loggedIn","yes");
    localStorage.setItem("loginTime",Date.now());
    loginBox.classList.add("fade-out");
    setTimeout(()=>{loginBox.style.display="none";menu.style.display="block";},400);
  },900);
}

function logout(){localStorage.clear();location.reload();}
function go(q,target='_self'){window.open(BASE+q,target);}
function checkAutoLogout(){
  const t=localStorage.getItem("loginTime");
  if(!t)return;
  const diff=(Date.now()-parseInt(t))/60000;
  if(diff>AUTO_LOGOUT_MINUTES)logout();
}
setInterval(checkAutoLogout,30000);
if(localStorage.getItem("loggedIn")==="yes"){
  setTimeout(()=>{loginBox.style.display="none";menu.style.display="block";},300);
}
if("serviceWorker"in navigator){navigator.serviceWorker.register("sw.js");}
</script>

</body>
</html>
